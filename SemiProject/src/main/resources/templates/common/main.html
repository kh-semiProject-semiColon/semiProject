<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GoStudy</title>
	<link
	     rel="stylesheet"
	     href="https://cdn.jsdelivr.net/gh/fonts-archive/AppleSDGothicNeo/AppleSDGothicNeo.css"
	   />
    <link href="/css/main.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/list@6.1.8/index.global.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/fonts-archive/AppleSDGothicNeo/AppleSDGothicNeo.css"
      type="text/css"
    />
    
    <script th:inline="javascript">
      const authority = Number(
        /*[[${session.loginMember != null ? session.loginMember.authority : 0}]]*/ 0
      );
      
      document.addEventListener("DOMContentLoaded", function () {
        const calendarEl = document.getElementById("calendar");

        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "dayGridMonth",
          displayEventTime: false,
        });

        
      });
    </script>

    <style>
      /* ì¼ìš”ì¼ ë‚ ì§œ: ë¹¨ê°„ìƒ‰ */
      .fc .fc-day-sun a {
        color: rgb(253, 114, 114);
      }

      /* í† ìš”ì¼ ë‚ ì§œ: íŒŒë€ìƒ‰ */
      .fc .fc-day-sat a {
        color: rgb(101, 101, 240);
      }
    </style>
  </head>
  <body>
    <!-- common/header ì¶”ê°€-->
    <th:block th:replace="~{common/header}"></th:block>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Search Section -->
       
      <div class="search-section">
        <a href="/board/announce" style="text-decoration: none; color: #25272b;">
        <div class="search-bar gradient-border" >
            <div type="text" class="search-input" th:text="'ğŸ“¢ í•„ë…!! [ìƒˆë¡œìš´ ê³µì§€ì‚¬í•­]&nbsp;&nbsp;'+${latestAnouncement.announceName}+'&nbsp;ğŸ“¢'" style="text-align: center"></div>
          </div>
        </a>
        <div class="partner-links">
          <a href="https://kh-academy.co.kr/login/login.kh" target="_blank">
            <img src="/images/khlogo.png" alt="KHë¡œê³ " />
          </a>
          <a href="https://www.work24.go.kr/cm/main.do" target="_blank">
            <img src="/images/gov24logo.png" alt="ê³ ìš©24ë¡œê³ " />
          </a>
        </div>
      </div>

      <!-- ë©”ì¸ ì½˜í…ì¸  ë ˆì´ì•„ì›ƒ -->
      <div class="main-layout">
        <!-- ì™¼ìª½ ì˜ì—­: ë‹¬ë ¥ -->
        <div class="calendar-container">
          <div id="calendar"></div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì˜ì—­: ë¡œê·¸ì¸ ë° ììŠµëŒ€ì¥ -->
        <div class="side-container">
          <!-- ë¡œê·¸ì¸ ì´ì „ -->
          <div class="login-section" th:if="${session.loginMember == null}">
            <form action="/member/login" method="post" id="login-form">
              <div class="login-form">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control"
                    name="memberEmail"
                    placeholder="ì´ë©”ì¼"
                  />
                </div>
                <div class="form-group">
                  <input
                    type="password"
                    class="form-control"
                    name="memberPw"
                    placeholder="ë¹„ë°€ë²ˆí˜¸"
                  />
                </div>
                <button
                  style="
                    height: 40px;
                    background-color: #4aa7ff;
                    border: none;
                    color: #f8f9ff;
                    border-radius: 15px;
                    cursor: pointer;
                  "
                  class="login-Btn"
                >
                  ë¡œê·¸ì¸
                </button>
                <div class="form-group checkbox-group">
                  <div>
                    <input type="checkbox" id="idCheckbox" />
                    <label for="idCheckbox" style="color: #25272b"
                      >ID ì €ì¥</label
                    >
                  </div>
                  <div>
                    <a
                      th:href="@{/member/signup}"
                      style="
                        margin-left: auto;
                        text-decoration: none;
                        border-bottom: 1px solid #25272b;
                        color: #25272b;
                      "
                      class="find-idPw"
                      >íšŒì›ê°€ì…</a
                    >
                    <a
                      th:href="@{/member/findId}"
                      class="find-idPw"
                      style="
                        margin-left: 10px;
                        text-decoration: none;
                        border-bottom: 1px solid #25272b;
                        color: #25272b;
                      "
                      >ID / PW ì°¾ê¸°</a
                    >
                  </div>
                </div>
              </div>
            </form>
          </div>

          <!-- ë¡œê·¸ì¸ ì´í›„ -->

          <!-- Profile Section - Only shown when logged in -->
          <div class="profile-section gradient-border-wrapper" th:if="${session.loginMember != null}">
            <div class="profile-container ">
              <!-- Profile Image - Will load from DB -->
              <div class="profile-image">

                <!-- ì´ë¯¸ì§€ íƒœê·¸ë¥¼ í´ë¦­í•˜ë©´ ì´ë™í•˜ëŠ” ê±°ë¡œ í•´ë´¤ìŠµë‹ˆë‹¤. -->
                <a href="/myPage/info">
                  <img
                    th:src="${session.loginMember.profileImg} ?: '/images/logo.png'"
                    alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
                    id="profileImage"
                  />
                </a>

              </div>

              <!-- User Information -->
              <div class="profile-info">
                <p class="profile-name">
                  <a href="/myPage/info" style="color: inherit; text-decoration: none;"><span th:text="${session.loginMember.memberNickname}"
                    >ì„±ì›ìˆ­</span
                  >ë‹˜
                </p></a>
                <p
                  class="profile-email"
                  th:text="${session.loginMember.memberEmail}"
                >
                  user01@email.com
                </p>

                <!-- Action Buttons -->
                <div class="profile-actions">
                  <a
                    href="/studyCreation"
                    class="btn btn-primary"
                    id="createStudyBtn"
                    style="
                      font-size: 12px;
                      width: 50%;
                      height: 40px;
                      border-radius: 50px;
                    "
                    >ìŠ¤í„°ë””ìƒì„±</a
                  >
                  <!-- infoë€ì´ ê¸°ë³¸ í˜ì´ì§€ë¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. -->
                  <a
                    href="/myPage/info"
                    class="btn btn-secondary"
                    id="myPageBtn"
                    style="
                      font-size: 12px;
                      width: 50%;
                      height: 40px;
                      border-radius: 50px;
                    "
                    >ë§ˆì´í˜ì´ì§€
                  </a>
                </div>
              </div>

              <!-- Logout Button -->
              <div class="logout-container">
                <a href="/member/logout" class="logout-btn" id="logoutBtn"
                  >ë¡œê·¸ì•„ì›ƒ</a
                >
              </div>
            </div>
          </div>

          <!-- ììŠµëŒ€ì¥ ì„¹ì…˜ -->
          <div class="study-log-section">
            <h3 class="study-log-header">ììŠµëŒ€ì¥ ì ìœ¼ëŸ¬ ê°€ê¸°</h3>
            <div class="btn-group">
              <a
                href="/popup/Excel.html"
                target="_blank"
                onclick="window.open(this.href, '_blank', 'width=600,height=400,scrollbars=yes,left=600,top=100'); return false;"
                class="btn btn-primary"
                >ë“±ë¡</a
              >
              <a
                href="https://docs.google.com/spreadsheets/d/1FczIOY0FEsi1EaTsx-sz2uBtwLv-L5lk2CPMY26M4qw/edit?gid=1466346473#gid=1466346473"
                onclick="window.open(this.href, '_blank', 'width=550,height=800,left=600,top=100'); return false;"
                class="btn btn-secondary"
                >ìˆ˜ì •</a
              >
            </div>
          </div>


          <!-- ìŠ¤í„°ë””ì› ëª¨ì§‘ ì¹´ë“œ -->
          <a id="hire-link" th:href="@{/hire/detail/{hireNo}(hireNo=${latestPost.hireNo})}" style="text-decoration: none;">
          <div class="recruitment-card">
            <h4 class="recruitment-title">ìŠ¤í„°ë””ì› ëª¨ì§‘ì¤‘!</h4>
            <ul class="recruitment-details">
              <li th:text="${latestPost.studyName} + ìŠ¤í„°ë””">ëª¨ì½”ì½”ì˜ íŒŒì´ì¬ ìŠ¤í„°ë””</li>
              <li>
                ê¸°ê°„:&nbsp;<span th:text="${latestPost.studyPeriod == 0} ? 'ì¢…ê°•ê¹Œì§€' : ${latestPost.studyPeriod + 'ê°œì›”'}"></span>
              </li>
              <li>
                ìŠ¤í„°ë”” ë°©í–¥ì„±:&nbsp; <span th:switch="${latestPost.studyType}">
                  <span th:case="1"> ë ˆë²¨ì—…</span>
                  <span th:case="2"> ë³µìŠµ</span>
                  <span th:case="3"> ë¬¸ì œí’€ì´</span>
                  <span th:case="4"> ìê²©ì¦</span>
                  <span th:case="5"> í”„ë¡œì íŠ¸</span>
                </span>
              </li>
            </ul>
            <img
              th:src="@{${latestPost.studyMainImg != null} ? ${latestPost.studyMainImg} : '/images/logo.png'}"
              alt="ìŠ¤í„°ë”” ë©”ì¸ ì´ë¯¸ì§€"
              class="recruitment-icon"
            />
          </div>
          </a>
        </div>
      </div>

      <!-- Study Status Section -->
<div style="display: flex; justify-content: space-between; width: 100%;">
  
  <!-- ìŠ¬ë¼ì´ë“œ ì˜ì—­ -->
  <div class="carousel-wrapper" style="width: 65%;">
    <div class="carousel-container">
      <div class="carousel" id="studyCarousel">
        <div class="study-status-card" th:each="study : ${studyList}">
          <div class="study-status-info">
            <h3 class="study-status-title" th:text="${study.studyName} + ' ìŠ¤í„°ë”” í˜„í™©'">ìŠ¤í„°ë”” ì´ë¦„</h3>
            <ul class="study-status-details">
              <li>ë°©í–¥ì„± :&nbsp; 
                <span th:switch="${study.studyType}">
                  <span th:case="1"> ë ˆë²¨ì—…</span>
                  <span th:case="2"> ë³µìŠµ</span>
                  <span th:case="3"> ë¬¸ì œí’€ì´</span>
                  <span th:case="4"> ìê²©ì¦</span>
                  <span th:case="5"> í”„ë¡œì íŠ¸</span>
                </span>
              </li>
              <li>ìƒì„±ì¼ :&nbsp;<span th:text="${study.studyDate}"> 2025.05.12</span></li>
              <li>ìš´ì˜ê¸°ê°„ :&nbsp;
                <span th:if="${study.studyPeriod == 0}"> ë¬´ê¸°í•œ</span>
                <span th:unless="${study.studyPeriod == 0}" th:text="${study.studyPeriod + 'ê°œì›”'}"></span>
              </li>
              <li>ì¸ì› :&nbsp;<span th:text="${study.memberCount}">3</span> / <span th:text="${study.studyMaxCount}">5</span> ëª…</li>
            </ul>
          </div>
          <img th:src="${study.studyMainImg} != null ? @{${study.studyMainImg}} : @{/images/logo.png}" 
              alt="ìŠ¤í„°ë”” ì´ë¯¸ì§€" 
              class="study-status-image" />
        </div>
      </div>
      <div class="carousel-controls">
        <button class="carousel-control prev" onclick="prevSlide()">â€¹</button>
        <button class="carousel-control next" onclick="nextSlide()">â€º</button>
      </div>
    </div>
  </div>

  <!-- ì•„ì´ì½˜ ì˜ì—­ -->
  <div style="width: 30%; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">
    <a href="https://github.com/" target="_blank"><img src="/images/git.png" style="width: 130px;"></a>
    <a href="https://velog.io/" target="_blank"><img src="/images/velog.png" style="width: 130px;"></a>
    <a href="https://drive.google.com/drive/home" target="_blank"><img src="/images/google.png" style="width: 130px;"></a>
    <a href="https://zoom.us/j/6624238118?pwd=..." target="_blank"><img src="/images/zoom.png" style="width: 130px;"></a>
  </div>
</div>
</div>

      

    <!-- common/footer ì¶”ê°€-->
    <th:block th:replace="~{common/footer}"></th:block>
   <div th:if="${loginMember != null}">
  <script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", () => {
      const isStudy = document.querySelector(".isStudy");
      const createStudyBtn = document.querySelector("#createStudyBtn")
      const studyNo = [[${loginMember.studyNo}]];

      createStudyBtn.addEventListener("click",(e) => {
        if(studyNo != 0){
          e.preventDefault();
          alert("ì´ë¯¸ ê°€ì…ëœ ìŠ¤í„°ë””ê°€ ìˆìŠµë‹ˆë‹¤");
          location.href = "/";
        }
      })

    });
  </script>
</div>
    <script>
      // ê¸°ë³¸ JavaScript ë™ì‘ì„ ìœ„í•œ ê³µê°„
      document.addEventListener("DOMContentLoaded", function () {
        // Calendar event listeners
        const todayBtn = document.querySelector(".today-btn");
        if (todayBtn) {
          todayBtn.addEventListener("click", function () {
            // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ë™í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„ (ì‹¤ì œ êµ¬í˜„ ì‹œ)
            alert("ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ë™í•©ë‹ˆë‹¤.");
          });
        }
      });
    </script>
    <!-- í•™ì‚¬ì¼ì • ìº˜ë¦°ë” jsì¶”ê°€-->
    <script src="/js/cal.js"></script>
    <script src="/js/study/studyslider.js"></script>
  </body>
</html>
