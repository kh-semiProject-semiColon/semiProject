<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GoStudy - 회원탈퇴</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Noto Sans KR", sans-serif;
      }

      body {
        background-color: #ffffff;
        width: 100%;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      /* 반응형 컨테이너 */
      .container {
        display: flex;
        width: calc(100% - 724px); /* 362px * 2 */
        margin: 50px 362px;
        position: relative;
        border-radius: 10px;
      }

      /* 사이드바 스타일 */
      .sidebar {
        width: 20%;
        display: flex;
        flex-direction: column;
        gap: 5px;
        padding: 30px 15px;
        border-right: 2px solid #dbdae2;
      }

      .sidebar-heading {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 5px;
        text-align: center;
      }

      .sidebar-divider {
        width: 100%;
        height: 2px;
        background-color: #dbdae2;
        margin-bottom: 20px;
      }

      .sidebar-menu {
        display: flex;
        flex-direction: column;
        gap: 5px;
        width: 100%;
      }

      .sidebar-menu-item {
        width: 100%;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
      }

      .sidebar-menu-item:hover {
        background-color: #3867ff;
        color: #ffffff;
      }

      .sidebar-menu-item.active {
        background-color: #3867ff;
        color: #ffffff;
      }

      .sidebar-menu-divider {
        width: 100%;
        height: 1px;
        background-color: #dbdae2;
        margin: 5px 0;
      }

      /* 회원탈퇴 콘텐츠 스타일 */
      .content {
        width: 80%;
        padding: 30px;
        position: relative;
      }

      .content-title {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .content-divider {
        width: 100%;
        height: 2px;
        background-color: #dbdae2;
        margin-bottom: 30px;
      }

      .content-main {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding-bottom: 180px; /* 버튼 공간 확보 */
      }

      .lock-icon {
        width: 381px;
        height: 381px;
        opacity: 0.2;
      }

      .password-info {
        font-size: 18px;
        margin-top: 50px;
        margin-bottom: 30px;
        text-align: center;
      }

      .password-input {
        width: 500px;
        height: 40px;
        border: 1px solid #dbdae2;
        border-radius: 15px;
        padding: 0 15px;
        font-size: 16px;
        margin-bottom: 10px;
      }

      .password-validation {
        width: 500px;
        height: 20px;
        font-size: 14px;
        color: #ff3838;
        visibility: hidden;
      }

      .password-validation.error {
        visibility: visible;
      }

      .password-validation.success {
        color: #3867ff;
        visibility: visible;
      }

      .confirm-button {
        width: 114px;
        height: 51px;
        background-color: #3867ff;
        color: #ffffff;
        border: none;
        border-radius: 1000px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        position: absolute;
        bottom: 30px;
        right: 30px;
      }

      .confirm-button:hover {
        background-color: #2d52cc;
      }

      /* 반응형 디자인 */
      @media (max-width: 1440px) {
        .container {
          width: 80%;
          margin: 50px 10%;
        }

        .footer-content {
          width: 80%;
          margin: 0 10%;
        }
      }

      @media (max-width: 1024px) {
        .container {
          width: 90%;
          margin: 50px 5%;
        }

        .password-input,
        .password-validation {
          width: 100%;
          max-width: 400px;
        }

        .lock-icon {
          width: 300px;
          height: 300px;
        }

        .footer-content {
          width: 90%;
          margin: 0 5%;
        }
      }

      @media (max-width: 768px) {
        .container {
          flex-direction: column;
          width: 95%;
          margin: 50px 2.5%;
        }

        .sidebar {
          width: 100%;
          border-right: none;
          border-bottom: 2px solid #dbdae2;
          padding: 20px;
        }

        .content {
          width: 100%;
        }

        .lock-icon {
          width: 200px;
          height: 200px;
        }
      }
    </style>
  </head>
  <body>
    <th:block th:replace="~{common/header}"></th:block>

    <!-- 콘텐츠 영역 -->
    <div class="container">
      <!-- 사이드바 -->
      <th:block th:replace="~{myPage/sidebar}"></th:block>

      <!-- 메인 콘텐츠 -->
      <div class="content">
        <h1 class="content-title">회원탈퇴</h1>
        <div class="content-divider"></div>
        <div class="content-main">
          <svg
            class="lock-icon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          <p class="password-info">
            비밀번호를 입력해야 입장할 수 있는 페이지입니다.
          </p>
          <input
            type="password"
            class="password-input"
            id="password"
            placeholder="비밀번호를 입력하세요"
          />
          <p class="password-validation" id="password-validation">
            비밀번호가 일치하지 않습니다.
          </p>
        </div>
        <button class="confirm-button" id="confirm-button">확인</button>
      </div>
    </div>

    <th:block th:replace="~{common/footer}"></th:block>
    <script>
      // 사이드바 메뉴 활성화
      document.querySelectorAll(".sidebar-menu-item").forEach((item) => {
        item.addEventListener("click", function () {
          document.querySelectorAll(".sidebar-menu-item").forEach((i) => {
            i.classList.remove("active");
          });
          this.classList.add("active");

          // 메뉴 항목에 따른 페이지 이동 처리
          const menuText = this.textContent.trim();
          if (menuText === "프로필") {
            window.location.href = "/mypage/profile";
          } else if (menuText === "내 게시글/댓글 보기") {
            window.location.href = "/mypage/posts";
          } else if (menuText === "비밀번호 변경") {
            window.location.href = "/mypage/change-password";
          } else if (menuText === "회원 탈퇴") {
            window.location.href = "/mypage/withdrawal";
          }
        });
      });

      // 비밀번호 검증 처리
      const passwordInput = document.getElementById("password");
      const passwordValidation = document.getElementById("password-validation");
      const confirmButton = document.getElementById("confirm-button");

      passwordInput.addEventListener("input", function () {
        // 비밀번호 유효성 검사 로직 (예시)
        if (this.value.length < 8) {
          passwordValidation.textContent =
            "비밀번호가 너무 짧습니다. 8자 이상 입력해주세요.";
          passwordValidation.classList.add("error");
          passwordValidation.classList.remove("success");
        } else {
          passwordValidation.textContent = "유효한 비밀번호 형식입니다.";
          passwordValidation.classList.add("success");
          passwordValidation.classList.remove("error");
        }
      });

      confirmButton.addEventListener("click", function () {
        // 비밀번호 확인 후 처리 로직
        if (passwordInput.value.length >= 8) {
          // 서버에 비밀번호 검증 요청 (실제로는 AJAX 요청 등을 사용)
          alert("인증 성공! 회원탈퇴 진행 페이지로 이동합니다.");
          // window.location.href = '/mypage/withdrawal/confirm';
        } else {
          passwordValidation.textContent = "비밀번호를 올바르게 입력해주세요.";
          passwordValidation.classList.add("error");
          passwordValidation.classList.remove("success");
        }
      });
    </script>
  </body>
</html>
