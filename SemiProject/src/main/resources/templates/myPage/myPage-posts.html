<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>GoStudy 마이페이지 게시글</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonts-archive/AppleSDGothicNeo/AppleSDGothicNeo.css"
		type="text/css" />
	<link rel="stylesheet" href="/css/myPage/myPage-posts.css" />
	<link rel="stylesheet" href="/css/myPage/myPage-style.css" />
	<link rel="stylesheet" href="/css/common/footer.css" />
	<link rel="stylesheet" href="/css/common/header.css" />
	<link rel="stylesheet" href="/css/myPage/sidebar.css" />
</head>

<body>
	<!-- 헤더 -->
	<th:block th:replace="~{common/header}"></th:block>

	<!-- 메인 컨텐츠 -->
	<div class="main-content">
		<!-- 사이드바 -->

		<!-- 상자를 구분하기 위해 id를 추가했습니다. 
       id 추가 후 js 코드에서 사이드 바를 참고해주세요! -->
		<th:block th:replace="~{myPage/sidebar}"></th:block>

		<!-- 콘텐츠 영역 -->
		<div class="content">
			<!-- 내 게시글 섹션 -->
			<div class="content-section">
				<h2 class="content-heading">내 게시글</h2>

				<!-- 게시글 테이블 헤더 -->
				<div class="table-header">
					<div class="col-num">글번호</div>
					<div class="col-title">제목</div>
					<div class="col-author">작성자</div>
					<div class="col-date">작성일</div>
					<div class="col-views">조회수</div>
					<div class="col-likes">좋아요</div>
				</div>

				<!-- 게시글 목록 -->
				<!-- 질문, 자유 게시판 -->
				<div class="table-row" th:each="board : ${boardList}" th:data-board-no="${board.boardNo}"
					th:data-board-code="${board.boardCode}" onclick="testhandler(event)">
					<div class="col-num" th:text="${board.boardNo}">1</div>
					<div class="col-title" th:text="${board.boardTitle}">
						1번째 게시글
					</div>
					<div class="col-author" th:text="${board.memberNickname}">
						유저명
					</div>
					<div class="col-date" th:text="${board.boardWriteDate}">
						25.05.09
					</div>
					<div class="col-views" th:text="${board.readCount}">202</div>
					<div class="col-likes" th:text="${board.likeCount}">3</div>
				</div>

				<!-- 페이지네이션 -->
				<!-- 페이지네이션 -->
				<div class="pagination">
				    <!-- 맨 처음으로 (항상 표시) -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=1)}">&#x300A;</a>
				    
				    <!-- 이전 페이지 (항상 표시) -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${pagination.currentPage > 1 ? pagination.currentPage - 1 : 1})}">&#x3008;</a>

				    <!-- 페이지 번호들 -->
				    <a href="#" class="page-item"
				       th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage)}"
				       th:href="@{/mypage/posts(cp=${i})}" 
				       th:text="${i}"
				       th:class="${i == pagination.currentPage} ? 'page-item active' : 'page-item'">1</a>

				    <!-- 다음 페이지 (항상 표시) -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${pagination.currentPage < pagination.maxPage ? pagination.currentPage + 1 : pagination.maxPage})}">&#x3009;</a>
				    
				    <!-- 맨 마지막으로 (항상 표시) -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${pagination.maxPage})}">&#x300B;</a>
				</div>



			<!-- 내 댓글 섹션 -->
			<div class="content-section">
				<h2 class="content-heading">내 댓글</h2>

				<!-- 내 댓글 테이블 헤더 -->
				<div class="table-header">
					<div class="col-num">글번호</div>
					<div class="col-post-title">게시글 제목</div>
					<div class="col-comment-text">댓글내용</div>
					<div class="col-comment-date">작성일</div>
				</div>

				<!-- 댓글 목록 -->
				<div class="table-row" th:each="comment : ${commentList}" th:data-board-no="${comment.boardNo}"
					th:data-board-code="${comment.boardCode}" onclick="testhandler(event)">
					<div class="col-num" th:text="${comment.boardNo}">1</div>
					<div class="col-post-title" th:text="${comment.boardTitle}">
						1번째 게시글
					</div>
					<div class="col-comment-text" th:text="${comment.commentContent}">
						텍스트는 동그래 말줄임해줍니다...
					</div>
					<div class="col-comment-date" th:text="${comment.commentDate}">
						25.05.09 12:33
					</div>
				</div>

				<!-- 댓글 페이지네이션 -->
				<div class="pagination">
				    <!-- 맨 처음으로 -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${param.cp}, commentCp=1)}">&#x300A;</a>
				    
				    <!-- 이전 페이지 -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${param.cp}, commentCp=${commentPagination.currentPage > 1 ? commentPagination.currentPage - 1 : 1})}">&#x3008;</a>

				    <!-- 페이지 번호들 -->
				    <a href="#" class="page-item"
				       th:each="i : ${#numbers.sequence(commentPagination.startPage, commentPagination.endPage)}"
				       th:href="@{/mypage/posts(cp=${param.cp}, commentCp=${i})}" 
				       th:text="${i}"
				       th:class="${i == commentPagination.currentPage} ? 'page-item active' : 'page-item'">1</a>

				    <!-- 다음 페이지 -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${param.cp}, commentCp=${commentPagination.currentPage < commentPagination.maxPage ? commentPagination.currentPage + 1 : commentPagination.maxPage})}">&#x3009;</a>
				    
				    <!-- 맨 마지막으로 -->
				    <a href="#" class="page-item arrow" 
				       th:href="@{/mypage/posts(cp=${param.cp}, commentCp=${commentPagination.maxPage})}">&#x300B;</a>
				</div>
			</div>
		</div>
	</div>
	</div>
	<!-- 푸터 -->
	<th:block th:replace="~{common/footer}"></th:block>
	<script th:inline="javascript">
		const testhandler = (e) => {
			const boardNo = e.currentTarget.dataset.boardNo;
			const boardCode = e.currentTarget.dataset.boardCode?.trim(); // 공백 방지도 같이

			let boardType;

			switch (boardCode) {
				case "1":
				case "2":
					boardType = "board";
					window.location.href = `/${boardType}/${boardCode}/${boardNo}?cp=1`;
					return;

				case "3":
					boardType = "hire";
					break;

				case "4":
					boardType = "study";
					break;

				default:
					boardType = "unknown";
			}

			window.location.href = `/${boardType}/detail/${boardNo}`;
		};
	</script>

	<script src="/js/myPage/sidebar.js"></script>
	<script src="/js/myPage/myPage-posts.js"></script>
</body>

</html>